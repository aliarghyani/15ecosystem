<story-context id="bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>4</epicId>
    <storyId>4.1</storyId>
    <title>Transcript Page</title>
    <status>drafted</status>
    <generatedAt>2025-01-XX</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/stories/4-1-transcript-page.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>user</asA>
    <iWant>to read the full video transcript</iWant>
    <soThat>I can reference the complete content</soThat>
    <tasks>
      <task id="1" ac="1">Create transcript page route</task>
      <task id="2" ac="1">Display transcript content</task>
      <task id="3" ac="1">Add table of contents</task>
      <task id="4" ac="1,2">Ensure responsive design</task>
      <task id="5" ac="1,3">Add i18n translations</task>
      <task id="6" ac="1">Add navigation and breadcrumbs</task>
      <task id="7" ac="1,2,3">Test and verify functionality</task>
    </tasks>
  </story>

  <acceptanceCriteria>
    <criterion id="1">
      <given>I navigate to transcript page</given>
      <when>I view the page</when>
      <then>I see: Full video transcript from source file, Well-formatted text with proper line breaks, Table of contents linking to skill sections (if applicable), Easy-to-read typography, Mobile-responsive layout, Bilingual support (Persian/English)</then>
    </criterion>
    <criterion id="2">
      <given>I view the transcript page</given>
      <when>I scroll through content</when>
      <then>content is well-formatted and readable, mobile-responsive, and proper spacing and typography</then>
    </criterion>
    <criterion id="3">
      <given>I switch language</given>
      <when>I change language on transcript page</when>
      <then>transcript content updates to selected language and layout direction changes (RTL/LTR)</then>
    </criterion>
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc>
        <path>docs/epics.md</path>
        <title>Epic Breakdown</title>
        <section>Story 4.1: Transcript Page</section>
        <snippet>Story 4.1 focuses on creating a transcript page that displays the full video transcript with proper formatting, table of contents, and bilingual support.</snippet>
      </doc>
      <doc>
        <path>docs/stories/2-1-parse-yaml-source-files-bilingual.md</path>
        <title>Story 2.1 - Content Parsing</title>
        <section>Dev Agent Record - Completion Notes</section>
        <snippet>Created transcript data files in app/data/fa/transcript.ts (Persian) and app/data/en/transcript.ts (English placeholder). Transcript is a single string with line breaks.</snippet>
      </doc>
    </docs>
    <code>
      <artifact>
        <path>app/data/fa/transcript.ts</path>
        <kind>data-file</kind>
        <symbol>transcript</symbol>
        <lines>1-5</lines>
        <reason>Persian transcript data. Contains full video transcript as a string with line breaks (\r\n). Can be imported and displayed on transcript page.</reason>
      </artifact>
      <artifact>
        <path>app/data/en/transcript.ts</path>
        <kind>data-file</kind>
        <symbol>transcript</symbol>
        <lines>1-4</lines>
        <reason>English transcript data (placeholder). Currently empty string. Page should handle empty transcript gracefully.</reason>
      </artifact>
      <artifact>
        <path>app/pages/skills/[slug].vue</path>
        <kind>page</kind>
        <symbol>SkillPage</symbol>
        <lines>1-150</lines>
        <reason>Skill page shows breadcrumb navigation pattern and design patterns that can be reused for transcript page.</reason>
      </artifact>
    </code>
    <dependencies>
      <ecosystem name="node">
        <package name="nuxt" version="^4.2.1" />
        <package name="@nuxt/ui" version="^4.0.1" />
        <package name="@nuxtjs/i18n" version="10.1.1" />
        <package name="vue" version="^3.5.24" />
      </ecosystem>
    </dependencies>
  </artifacts>

  <constraints>
    <constraint>
      <type>data-access</type>
      <description>Must import transcript from app/data/fa/transcript.ts or app/data/en/transcript.ts. Handle empty English transcript gracefully (show placeholder message).</description>
    </constraint>
    <constraint>
      <type>text-formatting</type>
      <description>Must format transcript text with proper line breaks. Transcript contains \r\n line breaks that should be converted to HTML line breaks or preserved in display.</description>
    </constraint>
    <constraint>
      <type>i18n-integration</type>
      <description>Must use useI18n() composable and $t() for all text content. All content must be translatable. Use localePath() for navigation links.</description>
    </constraint>
    <constraint>
      <type>rtl-ltr-support</type>
      <description>Must support RTL layout for Persian (fa) and LTR layout for English (en). Ensure text alignment and navigation elements align properly.</description>
    </constraint>
    <constraint>
      <type>design-consistency</type>
      <description>Must follow portfolio's modern design patterns: clean layouts, modern typography, proper spacing. Support dark mode. Ensure mobile-responsive design.</description>
    </constraint>
  </constraints>

  <interfaces>
    <interface>
      <name>useI18n</name>
      <kind>Composable</kind>
      <signature>const { locale, t } = useI18n()</signature>
      <path>@nuxtjs/i18n</path>
    </interface>
    <interface>
      <name>useLocalePath</name>
      <kind>Composable</kind>
      <signature>const localePath = useLocalePath()</signature>
      <path>@nuxtjs/i18n</path>
    </interface>
  </interfaces>

  <tests>
    <standards>
      Functional tests should verify transcript page loads correctly, transcript content displays correctly, language switching updates content, breadcrumb navigation works, and empty English transcript handled gracefully. Visual tests should verify modern design, mobile responsiveness, proper spacing and typography, and RTL/LTR layout works.
    </standards>
    <locations>
      Tests should be co-located with components or in __tests__ directories (future). For now, manual testing and browser testing are sufficient.
    </locations>
    <ideas>
      <test ac="1">Verify transcript page displays full transcript</test>
      <test ac="1">Verify text is well-formatted with proper line breaks</test>
      <test ac="1">Verify table of contents displays (if applicable)</test>
      <test ac="1">Verify easy-to-read typography</test>
      <test ac="2">Test mobile responsiveness</test>
      <test ac="2">Test content readability</test>
      <test ac="3">Test language switching</test>
      <test ac="3">Test RTL/LTR layout switching</test>
      <test ac="1">Test empty English transcript handling</test>
    </ideas>
  </tests>
</story-context>
